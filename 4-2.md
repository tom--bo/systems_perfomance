## 4.3 DTrace

DTraceはプログラミング言語やツールを含む観測用のフレームワーク。  
この説ではDTraceの基本である、動的・静的なトレーシング、probe, provider, D, action, variable, ワンライナーとスクリプティングをまとめている。  
これらはこの後の章で、LinuxでもSolarisでも利用する。

DTraceはprobesと呼ばれる機構によって、ユーザ・カーネルレベルの両方のコードを観測することが出来る。  
probesがヒットすると、任意のD言語によるactionsが実行される。  
actionsはカウントイベントやタイムスタンプの記録計算、値の出力、データの集計などを行うことが出来る。
これらの処理はトレーシングを有効にした状態でリアルタイムに実行することができる。

（DTraceがspa_sync()を実行する時間をトレーシングする例）

他のトレーシングツールと異なる重要な点はDTraceはオーバーヘッドを極力減らしていることで、プロダクションセーフになっていることである。  
これを実現している１つの方法は、CPUごとのカーネルバッファを利用していることである。
これにより、メモリの空間的局所性を高め、キャッシュの一貫性のためのミスを減らし、同期のためにロックを不要要にしている。

DTraceは静的・動的なトレーシングの両方をサポートしている。  


### 4.3.1 Static and Dynamic Tracing




### 4.3.2 Probes



### 4.3.3 Providers



### 4.3.4 Arguments


### 4.3.5 D Language


### 4.3.6 Built-in Variables




### 4.3.7 Actions


### 4.3.8 Variable Types



### 4.3.9 One-Liners



### 4.3.10 Scripting


### 4.3.11 Overheads


### 4.3.12 Documentation and Resources


## 4.4 SystemTap


### 4.4.1 Probes



### 4.4.2 Tapsets



### 4.4.3 Actions and Built-ins


### 4.4.4 Examples


### 4.4.5 Overheads


### 4.4.6 Documentation and Resources


## 4.5 perf


## 4.6 Observing Observavility
